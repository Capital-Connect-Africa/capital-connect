<ng-container *ngIf="subscribe$ | async"/>
<ng-container *ngIf="activePlan$ | async"/>
<ng-container *ngIf="subscriptionTiers$ | async"/>

<div class="px-8 pricing__content">
    <ul class="grid grid-cols-3 gap-8 items-center">
        <li *ngFor="let tier of tiers" class="bg-white p-8 rounded-xl flex flex-col gap-4">
            <div class="">{{tier.name | titlecase}}</div>
            <h3>${{tier.price | numberabbreviation}}</h3>
            <div class="font-light">{{tier.description}}</div>
            <button class="py-3 text-blue-500 rounded-full action__button" (click)="subscribe(tier.id)" *ngIf="tier.id !==activePlan?.id">Choose Plan</button>
            <button class="py-3 text-teal-500 rounded-full action__button selected" *ngIf="tier.id ===activePlan?.id">Current Plan</button>
        </li>
    </ul>
</div>

<p-dialog header="Subscribe" [modal]="true" [(visible)]="signalService.userHasInitiatedPayment" styleClass="rounded-md modal p-8 bg-white shadow w-[90%] lg:w-[75%] xl:w-[50%] h-full">
    <span class="font-light text-[14px]" *ngIf="plan">Selected Tier: <b>{{plan | titlecase}}</b></span>
    <div class="h-[90%]">
        <iframe [src]="redirectURL" width="100%" height="100%" *ngIf="redirectURL"></iframe>
    </div>
</p-dialog>