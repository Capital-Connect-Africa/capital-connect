<ng-container *ngIf="stats$ | async"></ng-container>
<ng-container *ngIf="scoring$ | async"></ng-container>
<app-overview-section>
    <app-card [detail]="{title: 'Investor Preparedness', value: investorPreparednessScore+' %', featured: true}" (click)="showDialog()">
      <p class="helper__text text__yellow">See suggested actions</p>
    </app-card>
    <app-card [detail]="{title: 'Impact element assessment', value: '0', featured: false}" >
      <p class="helper__text text__red">Check your eligibility</p>
    </app-card>
    <app-card [detail]="{title: 'Matched Advisors', value: '0', featured: false, period: '0 Past Months'}" ><app-photo-collage/></app-card>
    <app-card (click)="showMatchedInvestors()" [detail]="{title: 'Matched Investors', value: (matchedInvestors.length).toString(), featured: false, period: '0 Past Months'}" ><app-photo-collage/></app-card>
</app-overview-section>

<app-modal  [visible] ="visible" [title]="'Your Investor Ready Report'" [helperText] ="'Below is your investor readiness Summary'">
  <div class="flex flex-col diag-body gap-[.5rem]">
    <h3 class="sub-title">{{ currentCompany.name }}</h3>
    <p>Country - {{ currentCompany.country }} </p>
    <p>Sector - {{ currentCompany.businessSector }}</p>
    <h3 class="sub-title">Investor  Preparedness score</h3>
    <h2 class="score-value">{{investorPreparednessScore}}%</h2>
    <h3 class="sub-title">Investor  Eligibility score</h3>
    <h2 class="score-value">{{investorEligibilityScore}}%</h2>
  </div>
  <div class="details flex flex-col gap-4 pb-12">
    <p class="diag-title">Need a detailed report?.</p>
    <p class="sub-title">On Capital Connect Africa you can:</p>
    <ul class="flex-col flex gap-2 actions-list">
      <li>Get a detailed report on your company's investment readiness</li>
      <li>Plan your next milestones to unlock more capital</li>
      <li>Learn to speak investor and break down barriers</li>
      <li>Match with investors and support organizations that are a good fit for you</li>
    </ul>
    <div class="call-to-action flex gap-8 items-center">
      <a href="mailto: services@capitalconnect.africa">Request document</a>
      <a href="mailto: services@capitalconnect.africa">Contact your account manager</a>
    </div>
  </div>
</app-modal>


<app-modal [visible] ="investorsDiagVisible" title="Matched Investors" [value]="matchedInvestors.length" helperText ="You had a good match with this investor">
  <div class="flex mx-auto items-center justify-center text-center no-data" *ngIf="!matchedInvestors.length">
    You have not matched with any investors yet <br /> check again later
  </div>
  <div class="flex flex-col gap-4">
    @for(investor of matchedInvestors; track $index;){
      <div class="flex justify-between items-center business-details">
        <div class="flex items-center gap-1 flex-layout">
          <span>{{$index +1}}</span>
        </div>
        <span>{{investor.name}}</span>
        <div class="flex cta-group">
          <a class="">More details</a>
          <a class="">Connect</a>
        </div>
      </div>
    }
  </div>
</app-modal>
