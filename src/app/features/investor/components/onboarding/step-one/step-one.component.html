<div class="container">
  <div class="content">
    <ng-container *ngIf="init$ | async"></ng-container>
    <ng-container *ngIf="submission$ | async"></ng-container>
    <ng-container *ngIf="questions$ | async as questions">
      <form [formGroup]="formGroup" (ngSubmit)="handleSubmit()">
        <div class="form_content__container">
          <div class="header">
            <div class="steps__bar">
              <p>Step 1 of 3</p>
              <ul class="indicators">
                <li *ngFor="let step of [1,2,3]; let i = index" [class.active]="(i + 1) <= 1"></li>
              </ul>
            </div>
            <strong>Registration</strong>
          </div>
          <div *ngFor="let question of questions; let i = index" class="input__wrapper">
            <label class="input__label">{{question.text}}<sup>*</sup></label>
            <a>Why do we ask this?</a>
            <div *ngIf="question.type === field_type.SINGLE_CHOICE" class="form__row">
              <select class="input__field" [formControlName]="'question_' + question.id">
                <option value="">Select option</option>
                <option *ngFor="let answer of question.answers" [value]="answer.id">
                  {{ answer.text }}
                </option>
              </select>
            </div>
            <div *ngIf="question.type === field_type.MULTIPLE_CHOICE" class="check__form">
              <div *ngFor="let answer of question.answers">
                <input type="checkbox" (change)="onCheckboxChange(question.id, $event)" [value]="answer.id">
                <label>{{ answer.text }}</label>
              </div>
            </div>
            <div *ngIf="question.type === field_type.TRUE_FALSE" class="radio__form">
              <div *ngFor="let answer of question.answers">
                <input type="radio" [formControlName]="'question_' + question.id" [value]="answer.id">
                <label>{{ answer.text }}</label>
              </div>
            </div>
            <div *ngIf="question.type !== field_type.SINGLE_CHOICE && question.type !== field_type.MULTIPLE_CHOICE && question.type !== field_type.TRUE_FALSE" class="form__row">
              <input class="input__field" [formControlName]="'question_' + question.id" type="text" placeholder="" />
            </div>
          </div>
        </div>
        <div class="cta__group">
          <a routerLink="/investor">Skip and go to dashboard</a>
          <button class="btn btn-primary outline" type="button" (click)="goBack()">Back</button>
          <button class="btn btn-primary" [disabled]="!formGroup.valid" [ngClass]="{'disabled-btn': !formGroup.valid }">Next</button>
        </div>
      </form>
    </ng-container>
  </div>
</div>
