<ng-container *ngIf="profileVisibility$ | async"></ng-container>


<div class="main">
  <div class="navbar">
    <app-navbar [showBanner]="showBanner" onDashboard="true" />
  </div>
    <div class="main__content">
      <ng-container *ngIf="userProfile$ | async as result">
          <div class="flex flex-col gap-4 rounded-[.5rem] overflow-hidden h-max">
          <section class="cover__background">
            <div class="profile__card">
              <img
              src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALAAAACUCAMAAAAEVFNMAAAAMFBMVEXk5ueutLfp6uu+w8WrsbTHy821ur3h4+SorrLKztC5vsHe4OLr7e7b3t/S1dfV2Nr5rpp2AAAEJklEQVR4nO2c25KkIAxAJVxFkf//20Xty3Q72w0EE6bK8zbzdCoVQ4DQw3BxcXFxcXFxcXFxcXFx8cexCW6HLGCY4jJquaLHJU7pP/0CELT0Qj0RRo4TdOoMgzZCKPFK+tssXYZ50u5d9o5T48St9wZYfYjti7IYuRVfmBfzSXdLDR9mbs0n8pvuFmXNrXknfA3vzdj3kckx0zelhQkdlIuYq7sp8xtHV+CbjCO3b0l8NwKrbyjVTXnM6Wuzv7efxnxpPGfV33f46jEsZR/cg4UpxlOdblqlmXr7qoTYjHmSorxCPI1ZQlwd4CQsGbI4VH5xuzH98gG+PsAJ+hBPKF9hqDtN0ChfochrsUcKS+JCEXG+CWLhEZfCqaOgbYwtogjvKEkrbJC+yZh01z9hVo0dR+lbupP7VZh0sdPYFE4pMRJWYpBoXyE0pTBy2digbCfmBr7CUwrjUzj1P5fw2cJ0vn8wwg18ST86wLcSxMK4Dd0O6bbury3NQ+2p2g9oO3jUocRNmHSPZNG+wpE28Bbf/VAWiaHBV+do73JhwQbYER/9oHeh1Ifa2D0H+Zk2LMgkJr9gBJwv7THKJowKMf3hZQIVYY6LL0Q/QXwSeMNW95jKc/hiFg+mGYTa4xSme8XVuConmBJiEy4f71iFJ8YxmoqmzZFujQ4UXx3wJfAOFBpz+yaKqrGj7yEOlFwo9eC73uJmGqteRlzTkpejrExkHwu8AUF+b4Sc5Ky/Bxb1LcjcM4xvrAPw/3VWyuj+JvdhGv2vykr5patseGKDVm+T+8oJzTse+hkAu2wHAEasBxdGjnbuM7hPIBlOIcYY7DD3l7kHIDHfga6Fk5wNcX2H5L1JeO+350hh6Ex7FZ3Cor1wK+r1m9v+lXI5hsn28MIHIAVVrq4fFw6lVmu9BF7n9XWXN+LrIvewFsbIOLC9mDlW3Sxt5xf64VYYohYVtjtOySVQfolzWoWzOsr/hzllNJkyTPL4zq/CWXiaI8zgq1PhHSdOz2aIMrcmZKH8aE8MM1jZIBdejZU5LzGsbhrdh7M5qVuOraP7MHYn5EUqDSfpbsrNCwacFt67cuM5QY0fN/iCa/j8EqYWEzPfUM3eVEE4OR0eyo3SAntJW2Dc4qwQ0OP5Jcb464+Z0reBMWl8WxhT+yKN8YMyNcb1E4OAfNFVa6xrd6kNhtPqjGtXkDPbnc9UnXeSF4gndR+eZfOtm3xtMtNcTfkYXvUz9kYUJ0WD92coSitF9u3macKFo461vxPQDrcUBZivpD0oeuaBnFNsQtFsW4MHiXgKQtzkuRwalV+LubqeN7KXO5Y2+Eh+R1E6eHQWJrdpa/DmoQ25q11gXpbvqMwRIfR4eyuyf9Khg2VuJ7ef4G58nuQJW6k6IbONt/sPmXZA7m8MQjfk+fbNP0nUOaYuq8XQAAAAAElFTkSuQmCC"
              class="avatar" alt="profile" *ngIf="!result.profile.company.companyLogo" />
              <img [src]="result.profile.company.companyLogo.path" class="avatar" alt="Logo" *ngIf="result.profile.company.companyLogo"/>
            </div>
          </section>
          
          <div class="flex flex-col bg-white  bio_info">
            <h2>{{result.profile.name}}</h2>
            <p><mat-icon>call</mat-icon>{{result.profile.mobileNumber || 'Add phone'}}</p>
            <p><mat-icon>mail</mat-icon>{{result.profile.email}}</p>
            <section>
                <h2>Business</h2>
                <button class="btn__cta text-blue-600 font-bold" title="Details" (click)="editOrganizationProfile()">Edit Business Details</button>
                <div class="card__item__details" details>
                  <div class="card__item__detail_info">
                    <div>
                      <label>Name:</label>
                      <p>{{result.profile.company.name}}</p>
                    </div>
                    <div>
                      <label>Country:</label>
                      <p>{{result.profile.company.country}}</p>
                    </div>
                    <div>
                      <label>Growth Stage:</label>
                      <p>{{result.profile.company.growthStage}}</p>
                    </div>
                  </div>
                </div>
                <div class="card__item__details" details>
                  <div class="card__item__detail_info">
                    <div>
                      <label>Employees:</label>
                      <p>{{result.profile.company.numberOfEmployees}}</p>
                    </div>
                    <div>
                      <label>Sector:</label>
                      <p>{{result.profile.company.businessSector}}</p>
                    </div>
                    <div>
                      <label>Sub-sector:</label>
                      <p>{{result.profile.company.businessSubsector}}</p>
                    </div>
                  </div>
                </div>


                <div class="p-field-checkbox flex items-center space-x-4">
                  <label for="switch" class="text-gray-700 font-semibold" style="font-size: 0.975rem;">Mute Capital Raise For My Business</label>
                    <label class="switch">
                      <input type="checkbox" [(ngModel)]="result.profile.company.isHidden"
                      (ngModelChange)="onToggle(result.profile.company.id,result.profile.company.isHidden)" 
                      />
                      <span class="slider round"></span>
                    </label>
                </div>
                <p style="font-size: 0.875rem;">This will hide your company profile from all investors who you are not yet connected with  or have declined your business or those you have declined</p>

                <p>
                </p>
              </section>
          </div>
          <app-referral-link />
        </div>
        </ng-container>

      <section class="col__right">
        <h2><mat-icon>notifications_active</mat-icon><span>Reminder</span></h2>
        <app-alert [action] ="showDialog" className="rounded-[.5rem]"/>
        <ng-container *ngIf="submissionActions$ | async as submissionActions">
          <div *ngFor="let action of submissions">
             <app-alert-card [heading]="action.title??''" className="rounded-[.5rem]" [link]="action.url" body="Please provide information for this section" command="Provide"/>
          </div>
        </ng-container>
      </section>
    </div>
</div>

