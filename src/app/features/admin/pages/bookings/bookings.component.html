<ng-container *ngIf="bookings$ | async" />
<ng-container *ngIf="delete$ | async" />
<app-admin-ui-container [title]="'Bookings'">
    <div class="flex items-center justify-between">
        <input class="px-4 py-3 border search" pInputText placeholder="search ..." (input)="applyFilter($event)"/>
        <span>{{showingRows}} of {{rowsCount}}</span>
      </div>
    <p-table #dt [value]="bookings" [paginator]="false"> 
        <ng-template pTemplate="header">
        <tr>
            <th *ngFor="let col of cols">
            <span class="header-container">
                <span class="header-text">
                {{col.header}}
                </span>
            </span>
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-booking>
        <tr>
            <td>{{booking.calendlyEventId}}</td>
            <td>{{booking.payment.currency}} {{booking.payment.amount | numberabbreviation}}</td>
            <td>{{booking.payment.status | titlecase}}</td>
            <td>{{booking.createdAt | time_ago}}</td> 
            <td>
                <div class="flex gap-1 items-center cta__btns">
                  <button title ="Open" class="block text-center text-blue-500 hover:text-blue-800 transition-all" (click)="openBooking(booking.id)"><i class="pi pi-info-circle"></i></button>
                  <button title ="Remove" class="block text-center text-rose-500 hover:text-rose-800 transition-all" (click)="removeBooking(booking.id)"><i class="pi pi-trash"></i></button>
                </div>
            </td>
        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr>
        <td colspan="5">No bookins yet.</td>
        </tr>
    </ng-template>
    </p-table>
    <p-paginator 
      styleClass="justify-start"
      (onPageChange)="onPageChange($event)" 
      [first]="first"
      [rows]="rows" 
      [totalRecords]="rowsCount" 
      [rowsPerPageOptions]="[10, 20, 30, rowsCount]" />
</app-admin-ui-container>